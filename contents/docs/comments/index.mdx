---
title: Comments
description: Add cell-level commenting for collaboration.
keywords:
  [
    "comments",
    "CommentData",
    "onSaveComment",
    "onDeleteComment",
    "collaboration",
  ]
---

## Comments

Enable cell-level commenting for team collaboration.

### Configuration

```tsx
<BaseTable
  headers={headers}
  items={items}
  comments={comments}
  advancedSettings={{
    currentUsername: "john.doe", // Current user for new comments
  }}
  onSaveComment={(comment, item) => {
    console.log("Save comment:", comment)
    console.log("On item:", item)
  }}
  onDeleteComment={(comment, item) => {
    console.log("Delete comment:", comment)
  }}
/>
```

### CommentData Interface

The `CommentData` interface defines the structure for comments. Comments are applied based on `propertyId` and `value` matching:

```ts
export default interface CommentData {
  propertyId: string
  value: unknown
  date: Date
  formatDateFunction?: (date: Date) => string // Optional function to format the date
  author?: string
  commentId?: number // Optional, if available
  columnId?: string // Optional, if provided, applies the comment to the specific column only
  text: string // The comment text
}
```

Guidance:

- **Matching behavior:** The comment is applied when an item's property with the name `propertyId` strictly equals `value`.
- **Targeting a specific cell:** Ensure the pair (`propertyId`, `value`) uniquely identifies the cell you want to comment on. A common pattern is to use `propertyId: "id"` and `value` equal to the item's unique id.
- **Column-specific comments:** If you also pass `columnId`, the comment will only appear on that specific column's cell for items that match the condition.

````

### Managing Comments

```tsx
const [comments, setComments] = useState<CommentData[]>([])

<BaseTable
  headers={headers}
  items={items}
  comments={comments}
  advancedSettings={{
    currentUsername: currentUser.name,
  }}
  onSaveComment={async (comment, item) => {
    // Save to database
    const savedComment = await saveCommentToDatabase(comment)

    // Update local state
    setComments((prev) => {
      const existing = prev.find(
        (c) => c.propertyId === comment.propertyId && c.value === comment.value
      )
      if (existing) {
        return prev.map((c) =>
          c.propertyId === comment.propertyId && c.value === comment.value
            ? savedComment
            : c
        )
      }
      return [...prev, savedComment]
    })
  }}
  onDeleteComment={async (comment, item) => {
    // Delete from database
    await deleteCommentFromDatabase(comment.commentId)

    // Update local state
    setComments((prev) =>
      prev.filter(
        (c) =>
          c.propertyId !== comment.propertyId || c.value !== comment.value
      )
    )
  }}
/>
````

### Comment Data Structure

| Field                | Type                     | Description                                             |
| -------------------- | ------------------------ | ------------------------------------------------------- |
| `propertyId`         | `string`                 | The property name to match on the item                  |
| `value`              | `unknown`                | The value to match for the property                     |
| `date`               | `Date`                   | When the comment was created                            |
| `text`               | `string`                 | The comment content                                     |
| `author`             | `string` (optional)      | Who wrote the comment                                   |
| `commentId`          | `number` (optional)      | Unique comment identifier                               |
| `columnId`           | `string` (optional)      | If provided, applies the comment to the specific column |
| `formatDateFunction` | `(date: Date) => string` | Optional function to format the date display            |

### Visual Indicators

Cells with comments typically show:

- A comment indicator (e.g., small triangle in corner)
- Hover tooltip with comment preview
- Click to expand full comment thread

### Filtering by Comments

Find items with comments:

```tsx
const itemsWithComments = items.filter((item) =>
  comments.some((c) => item[c.propertyId] === c.value)
)
```

### Real-time Collaboration

For real-time comment updates, integrate with websockets:

```tsx
useEffect(() => {
  const ws = new WebSocket("wss://your-server/comments")

  ws.onmessage = (event) => {
    const newComment = JSON.parse(event.data)
    setComments((prev) => [...prev, newComment])
  }

  return () => ws.close()
}, [])
```
